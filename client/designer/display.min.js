app1.controller("FormDisplayEditCtrl",["$scope","$routeParams","$mdDialog","SessionService","DesignForm","DesignDataModel",function(e,n,t,a,o,r){e.sessionData=a.getSessionData(),e.$watch(function(){return a.getSessionData()},function(n,t){n!=t&&(e.sessionData=n)}),e.section_index=n.section,e.block_index=n.block,e.field_index=n.field,e.display_type={list:{en:"List",fr:"Liste"},item:{en:"Detail List",fr:"Liste des détails"},shorttext:{en:"Text",fr:"Texte"},number:{en:"Number",fr:"Nombre"},currency:{en:"Amount",fr:"Montant"},editor:{en:"Text Editor",fr:"Editeur texte"},feed:{en:"Discussion Feed",fr:"Fil de discussion"},file:{en:"File",fr:"Fichier"},selection:{en:"Selection",fr:"Selection"},check:{en:"Check",fr:"Contrôle"},calendar:{en:"Calendar",fr:"Calendrier"},calculation:{en:"Formula",fr:"Formule"},email:{en:"Email",fr:"Courriel"},address:{en:"Address",fr:"Adresse"}};var s=Object.keys(e.display_type);for(e.display_types=[],i=0;i<s.length;i++)e.display_types.push({translated_name:a.translate(e.display_type[s[i]]),type:s[i]});o.get({id:n.id},function(n,t){e.form=n,e.form.translated_name=a.translate(e.form.name),e.field=e.form.display[e.section_index].blocks[e.block_index].fields[e.field_index],e.datamodel_keys=[];for(var o=Object.keys(e.form.datamodel.translation),i=0;i<o.length;i++)e.datamodel_keys.push({translated_name:a.translate(e.form.datamodel.translation[o[i]]),id:o[i]});for(var i=0;i<e.form.actions.length;i++)e.form.actions[i].translated_name=a.translate(e.form.actions[i].name);for(var i=0;i<e.form.values.length;i++)e.form.values[i].translated_name=a.translate(e.form.values[i].name);e.sessionData.applicationName=e.sessionData.appData.app_designer,a.setSessionData(e.sessionData)}),e.editText=function(e,n,a){e[n]||(e[n]={}),t.show({templateUrl:"designer/text.html",controller:"TextCtrl",locals:{text:e[n],multipleLines:a},parent:angular.element(document.body),clickOutsideToClose:!0}).then(function(t){e[n]=t})},e.save=function(){o.update({id:e.form._id},e.form).$promise.then(function(t){a.init(),a.location("/form_edit/"+formId+"?application_id="+n.application_id+"&workflow_id="+e.workflow._id)})["catch"](function(e){l()})};var l=function(){t.show(t.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(e.sessionData.appData.new_document_version).textContent(e.sessionData.appData.already_modified_document).ok(e.sessionData.appData.ok))}}]);
