app1.controller("FileCtrl",["$scope","$routeParams","$location","SessionService","FileUrl",function(e,a,t,i,o){e.sessionData=i.getSessionData(),e.workflow=!1,e.workflow_translated_name=null;var n=function(){if("undefined"==a.iframe_file||"undefined"==a.application_id)t.url("/applications");else{if(e.sessionData.application_id=a.application_id,e.sessionData.applications){for(var n=e.sessionData.applications,s=0;s<n.length;s++)if(n[s].translated_name=i.translate(n[s].name),n[s].translated_description=i.translate(n[s].description),n[s]._id==a.application_id){if(e.sessionData.applicationName=n[s].translated_name,a.workflow_id)for(var r=0;r<n[s].workflows.length;r++)n[s].workflows[r]._id==a.workflow_id&&(e.workflow_translated_name=i.translate(n[s].workflows[r].name));break}i.setSessionData(e.sessionData)}a.workflow_id&&(e.workflow=!0),o.get({id:a.iframe_file},function(e){document.getElementById("iframe_file").src="https://docs.google.com/viewer?url="+encodeURIComponent(e.url).replace(/'/g,"%27").replace(/"/g,"%22")+"&embedded=true"})}};e.$watch(function(){return i.getSessionData().applications},function(a,t){a!=t&&(e.sessionData=i.getSessionData(),n())}),e.home=function(){t.url("/workflows/"+a.application_id)},n()}]);
