app1.controller("WorkflowsCtrl",["$scope","$routeParams","$location","SessionService","Applications",function(e,a,t,o,i){e.sessionData=o.getSessionData();var s=function(){if("undefined"==a.application_id)o.location("/applications");else{var t=!1;if(e.sessionData.application_id=a.application_id,e.sessionData.applications){for(var n=e.sessionData.applications,r=0;r<n.length;r++)if(n[r].translated_name=o.translate(n[r].name),n[r].translated_description=o.translate(n[r].description),n[r]._id==a.application_id){e.workflows=n[r].workflows,e.sessionData.applicationName=n[r].translated_name,t=!0;break}if(t){for(var r=0;r<e.workflows.length;r++)e.workflows[r].translated_name=o.translate(e.workflows[r].name),e.workflows[r].translated_description=o.translate(e.workflows[r].description);e.sessionData.showShareForm=!1,o.setSessionData(e.sessionData)}else a.test&&i.get({id:a.application_id},function(a){e.sessionData.applications||(e.sessionData.applications=[]),e.sessionData.applications.push(a),s()})}}};e.$watch(function(){return o.getSessionData().applications},function(a,t){a!=t&&(e.sessionData=o.getSessionData(),s())}),e.open=function(e){"url"==e.type?o.location("/url/"+a.application_id+"?iframe_url="+e.url+"&workflow_id="+e._id):"file"==e.type?o.location("/file/"+a.application_id+"?iframe_file="+e.file+"&workflow_id="+e._id):o.location("/form/"+e.startup_form+"/0?application_id="+a.application_id+"&workflow_id="+e._id)},s()}]);
