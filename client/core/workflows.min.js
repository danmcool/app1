app1.controller("WorkflowsCtrl",["$scope","$routeParams","$location","SessionService","Applications",function(e,a,t,s,o){e.sessionData=s.getSessionData();var i=function(){if("undefined"==a.application_id)s.location("/applications");else{var t=!1;if(e.sessionData.application_id=a.application_id,e.sessionData.applications){for(var n=e.sessionData.applications,r=0;r<n.length;r++)if(n[r].translated_name=s.translate(n[r].name),n[r].translated_description=s.translate(n[r].description),n[r]._id==a.application_id){e.workflows=n[r].workflows,e.sessionData.applicationName=n[r].translated_name,t=!0;break}if(t){for(var r=0;r<e.workflows.length;r++)e.workflows[r].translated_name=s.translate(e.workflows[r].name),e.workflows[r].translated_description=s.translate(e.workflows[r].description);e.sessionData.showShareForm=!1,s.setSessionData(e.sessionData)}else a.test&&o.get({id:a.application_id},function(a){e.sessionData.applications||(e.sessionData.applications=[]),e.sessionData.applications.push(a),i()})}}};e.$watch(function(){return s.getSessionData().applications},function(a,t){a!=t&&(e.sessionData=s.getSessionData(),i())}),e.open=function(e){"url"==e.type?s.location("/url/"+a.application_id+"?iframe_url="+e.url+"&workflow_id="+e._id):"file"==e.type?s.location("/file/"+a.application_id+"?iframe_file="+e.file+"&workflow_id="+e._id):s.location("/form/"+e.startup_form+"/0?application_id="+a.application_id)},i()}]);
