app1.controller("UserCtrl",["$scope","$location","SessionService","AppTranslationService","User","Password",function(e,t,a,i,o,r){e.password={current:"","new":"",repeat:""},e.sessionData=a.getSessionData(),e.sessionData.applicationName="App1",a.setSessionData(e.sessionData),e.$watch(function(){return a.getSessionData()},function(t,i){t!=i&&(e.sessionData=t,e.sessionData.applicationName="App1",a.setSessionData(e.sessionData))}),e.saveUserData=function(){e.sessionData.appData=i.translate(e.sessionData.userData.properties.correctedLanguage),a.setSessionData(e.sessionData),o.update({id:e.sessionData.userData._id},{properties:e.sessionData.userData.properties}),a.location("/applications")},e.changeUserPassword=function(){r.update({old:e.password.old,"new":e.password["new"]}),a.location("/applications")},e.validatePassword=function(){e.password["new"]==e.password.repeat?e.userPasswordForm.password_repeat.$setValidity("userPasswordForm.password_repeat.$error.match",!0):e.userPasswordForm.password_repeat.$setValidity("userPasswordForm.password_repeat.$error.match",!1)}}]);
