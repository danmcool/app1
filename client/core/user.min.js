app1.controller("UserCtrl",["$scope","$location","SessionService","AppTranslationService","User","Password",function(s,a,e,t,o,r){s.password={current:"","new":"",repeat:""},s.sessionData=e.getSessionData(),s.sessionData.applicationName="App1",e.setSessionData(s.sessionData),s.$watch(function(){return e.getSessionData()},function(a,t){a!=t&&(s.sessionData=a,s.sessionData.applicationName="App1",e.setSessionData(s.sessionData))}),s.saveUserData=function(){s.sessionData.appData=t.translate(s.sessionData.userData.properties.language),e.setSessionData(s.sessionData),o.update({id:s.sessionData.userData._id},{properties:s.sessionData.userData.properties}),e.location("/applications")},s.changeUserPassword=function(){r.update({old:s.password.old,"new":s.password["new"]}),e.location("/applications")},s.validatePassword=function(){s.password["new"]==s.password.repeat?s.userPasswordForm.password_repeat.$setValidity("userPasswordForm.password_repeat.$error.match",!0):s.userPasswordForm.password_repeat.$setValidity("userPasswordForm.password_repeat.$error.match",!1)}}]);
