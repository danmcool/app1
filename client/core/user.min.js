app1.controller("UserCtrl",["$scope","$location","SessionService","AppTranslationService","User","Password",function(e,a,t,s,o,i){e.password={current:"","new":"",repeat:""},e.sessionData=t.getSessionData(),e.sessionData.applicationName="App1",t.setSessionData(e.sessionData),e.$watch(function(){return t.getSessionData()},function(a,s){a!=s&&(e.sessionData=a,e.sessionData.applicationName="App1",t.setSessionData(e.sessionData))}),e.saveUserData=function(){e.sessionData.appData=s.translate(e.sessionData.userData.properties.language),t.setSessionData(e.sessionData),o.update({id:e.sessionData.userData._id},{properties:e.sessionData.userData.properties}),a.url("/applications")},e.changeUserPassword=function(){i.update({old:e.password.old,"new":e.password["new"]}),a.url("/applications")},e.validatePassword=function(){e.password["new"]==e.password.repeat?e.userPasswordForm.password_repeat.$setValidity("userPasswordForm.password_repeat.$error.match",!0):e.userPasswordForm.password_repeat.$setValidity("userPasswordForm.password_repeat.$error.match",!1)}}]);
