app1.controller("UserCtrl",["$scope","$location","$window","SessionService","AppTranslationService","User","Password",function(e,t,a,o,r,i,n){e.password={current:"","new":"",repeat:""},e.sessionData=o.getSessionData(),e.sessionData.applicationName="App1",o.setSessionData(e.sessionData),e.$watch(function(){return o.getSessionData()},function(t,a){t!=a&&(e.sessionData=t,e.sessionData.applicationName="App1",o.setSessionData(e.sessionData))}),e.saveUserData=function(){if(e.sessionData.userData.properties.language&&"auto"==e.sessionData.userData.properties.language){var t=a.navigator.userLanguage||a.navigator.language;t?e.sessionData.userData.properties.correctedLanguage=t.startsWith("en")?"en":t.startsWith("fr")?"fr":"en":e.sessionData.userData.properties.correctedLanguage="en"}else e.sessionData.userData.properties.correctedLanguage=e.sessionData.userData.properties.language;e.sessionData.appData=r.translate(e.sessionData.userData.properties.correctedLanguage),o.setSessionData(e.sessionData),i.update({id:e.sessionData.userData._id},{properties:e.sessionData.userData.properties}),o.location("/applications")},e.changeUserPassword=function(){n.update({old:e.password.old,"new":e.password["new"]}),o.location("/applications")},e.validatePassword=function(){e.password["new"]==e.password.repeat?e.userPasswordForm.password_repeat.$setValidity("userPasswordForm.password_repeat.$error.match",!0):e.userPasswordForm.password_repeat.$setValidity("userPasswordForm.password_repeat.$error.match",!1)}}]);
