app1.controller("DatamodelCtrl",["$scope","SessionService","DesignDataModel","$location","$routeParams","$mdDialog",function(a,e,t,s,o,i){ga("send","pageview","/app/datamodel"),a.sessionData=e.getSessionData(),a.$watch(function(){return e.getSessionData()},function(e,t){e!=t&&(a.sessionData=e)}),a.sessionData.applicationName=a.sessionData.appData.datamodel_designer,e.setSessionData(a.sessionData),a.datamodels=[],a.skip=0,a.limit=10,a.stopScroll=!1,a.getNextDatamodels=function(){if(!a.stopScroll&&!a.tempStopScroll){var s=a.limit,o=a.skip;a.skip+=a.limit,a.tempStopScroll=!0,t.query({skip:o,limit:s},function(t){if(t.length<a.limit&&(a.stopScroll=!0),t&&t.length>0)for(var s=0;s<t.length;s++)t[s].translated_name=e.translate(t[s].name),t[s].translated_description=e.translate(t[s].description),a.datamodels.push(t[s]);a.tempStopScroll=!1})}},a.getNextDatamodels(),a.editDatamodel=function(a){e.location("/datamodel/"+a)},a.deleteDatamodel=function(a){e.location("/datamodel/"+a)},a.newDatamodel=function(){i.show(i.prompt().parent(angular.element(document.body)).clickOutsideToClose(!0).title(a.sessionData.appData.new_datamodel_name).initialValue("My Datamodel").ok(a.sessionData.appData.ok).cancel(a.sessionData.appData.cancel)).then(function(s){var o={};o[a.sessionData.userData.properties.correctedLanguage]=s;var i=new t({name:o});i.$save(function(){e.location("/datamodel/"+i._id)})})}}]);
