app1.controller("DatamodelCtrl",["$scope","SessionService","DesignDataModel","$location","$routeParams","$mdDialog",function(e,t,a,i,o,r){e.sessionData=t.getSessionData(),e.$watch(function(){return t.getSessionData()},function(t,a){t!=a&&(e.sessionData=t)}),e.sessionData.applicationName=e.sessionData.appData.datamodel_designer,t.setSessionData(e.sessionData),e.datamodels=[],e.skip=0,e.limit=10,e.stopScroll=!1,e.getNextDatamodels=function(){if(!e.stopScroll&&!e.tempStopScroll){var i=e.limit,o=e.skip;e.skip+=e.limit,e.tempStopScroll=!0,a.query({skip:o,limit:i},function(a){if(a.length<e.limit&&(e.stopScroll=!0),a&&a.length>0)for(var i=0;i<a.length;i++)a[i].translated_name=t.translate(a[i].name),a[i].translated_description=t.translate(a[i].description),e.datamodels.push(a[i]);e.tempStopScroll=!1})}},e.getNextDatamodels(),e.editDatamodel=function(e){t.location("/datamodel/"+e)},e.deleteDatamodel=function(e){t.location("/datamodel/"+e)},e.newDatamodel=function(){r.show(r.prompt().parent(angular.element(document.body)).clickOutsideToClose(!0).title(e.sessionData.appData.new_datamodel_name).initialValue("My Datamodel").ok(e.sessionData.appData.ok).cancel(e.sessionData.appData.cancel)).then(function(i){var o={};o[e.sessionData.userData.properties.correctedLanguage]=i;var r=new a({name:o});r.$save(function(){t.location("/datamodel/"+r._id)})})}}]);
