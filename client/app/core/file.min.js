app1.controller("FileCtrl",["$scope","$routeParams","$location","SessionService","FileUrl",function(e,t,a,n,o){e.sessionData=n.getSessionData(),e.workflow=!1,e.workflow_translated_name=null;var r=function(){if("undefined"==t.iframe_file||"undefined"==t.application_id)n.location("/applications");else{if(e.sessionData.application_id=t.application_id,e.sessionData.applications){for(var a=e.sessionData.applications,r=0;r<a.length;r++)if(a[r].translated_name=n.translate(a[r].name),a[r].translated_description=n.translate(a[r].description),a[r]._id==t.application_id){if(e.sessionData.applicationName=a[r].translated_name,t.workflow_id)for(var i=0;i<a[r].workflows.length;i++)a[r].workflows[i]._id==t.workflow_id&&(e.workflow_translated_name=n.translate(a[r].workflows[i].name));break}n.setSessionData(e.sessionData)}t.workflow_id&&(e.workflow=!0),o.get({id:t.iframe_file},function(e){document.getElementById("iframe_file").src="https://docs.google.com/viewer?url="+encodeURIComponent(e.url).replace(/'/g,"%27").replace(/"/g,"%22")+"&embedded=true"})}};e.$watch(function(){return n.getSessionData().applications},function(t,a){t!=a&&(e.sessionData=n.getSessionData(),r())}),e.home=function(){n.location("/workflows/"+t.application_id)},r()}]);
