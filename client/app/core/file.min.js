app1.controller("FileCtrl",["$scope","$routeParams","$location","SessionService","FileUrl",function(a,e,t,s,o){ga("send","pageview","/app/file"),a.sessionData=s.getSessionData(),a.workflow=!1,a.workflow_translated_name=null;var i=function(){if("undefined"==e.iframe_file||"undefined"==e.application_id)s.location("/applications");else{if(a.sessionData.application_id=e.application_id,a.sessionData.applications){for(var t=a.sessionData.applications,i=0;i<t.length;i++)if(t[i].translated_name=s.translate(t[i].name),t[i].translated_description=s.translate(t[i].description),t[i]._id==e.application_id){if(a.sessionData.applicationName=t[i].translated_name,e.workflow_id)for(var n=0;n<t[i].workflows.length;n++)t[i].workflows[n]._id==e.workflow_id&&(a.workflow_translated_name=s.translate(t[i].workflows[n].name));break}s.setSessionData(a.sessionData)}e.workflow_id&&(a.workflow=!0),o.get({id:e.iframe_file},function(a){document.getElementById("iframe_file").src="https://docs.google.com/viewer?url="+encodeURIComponent(a.url).replace(/'/g,"%27").replace(/"/g,"%22")+"&embedded=true"})}};a.$watch(function(){return s.getSessionData().applications},function(e,t){e!=t&&(a.sessionData=s.getSessionData(),i())}),a.home=function(){s.location("/workflows/"+e.application_id)},i()}]);
