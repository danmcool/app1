app1.controller("UserCtrl",["$scope","$location","$window","SessionService","AppTranslationService","User","Password",function(a,e,t,s,o,i,n){ga("send","pageview","/app/user"),a.password={current:"","new":"",repeat:""},a.sessionData=s.getSessionData(),a.sessionData.applicationName="App1",s.setSessionData(a.sessionData),a.$watch(function(){return s.getSessionData()},function(e,t){e!=t&&(a.sessionData=e,a.sessionData.applicationName="App1",s.setSessionData(a.sessionData))}),a.saveUserData=function(){a.sessionData.userData.properties.correctedLanguage=s.computeLanguage(a.sessionData.userData.properties,t),a.sessionData.appData=o.translate(a.sessionData.userData.properties.correctedLanguage),s.setSessionData(a.sessionData),i.update({id:a.sessionData.userData._id},{properties:a.sessionData.userData.properties}),s.location("/applications")},a.changeUserPassword=function(){n.update({old:a.password.old,"new":a.password["new"]}),s.location("/applications")},a.validatePassword=function(){a.password["new"]==a.password.repeat?a.userPasswordForm.password_repeat.$setValidity("userPasswordForm.password_repeat.$error.match",!0):a.userPasswordForm.password_repeat.$setValidity("userPasswordForm.password_repeat.$error.match",!1)}}]);
