app1.controller("DatamodelCtrl",["$scope","SessionService","DesignDataModel","$location","$routeParams","$mdDialog",function(e,a,t,n,o,r){e.sessionData=a.getSessionData(),e.$watch(function(){return a.getSessionData()},function(a,t){a!=t&&(e.sessionData=a)}),e.sessionData.applicationName=e.sessionData.appData.datamodel_designer,a.setSessionData(e.sessionData),e.datamodels=[],e.skip=0,e.limit=10,e.stopScroll=!1,e.getNextDatamodels=function(){if(!e.stopScroll&&!e.tempStopScroll){var n=e.limit,o=e.skip;e.skip+=e.limit,e.tempStopScroll=!0,t.query({skip:o,limit:n},function(t){if(t.length<e.limit&&(e.stopScroll=!0),t&&t.length>0)for(var n=0;n<t.length;n++)t[n].translated_name=a.translate(t[n].name),t[n].translated_description=a.translate(t[n].description),e.datamodels.push(t[n]);e.tempStopScroll=!1})}},e.getNextDatamodels(),e.editDatamodel=function(e){a.location("/datamodel/"+e)},e.deleteDatamodel=function(e){a.location("/datamodel/"+e)},e.newDatamodel=function(){r.show(r.prompt().parent(angular.element(document.body)).clickOutsideToClose(!0).title(e.sessionData.appData.new_datamodel_name).initialValue("My Datamodel").ok(e.sessionData.appData.ok).cancel(e.sessionData.appData.cancel)).then(function(n){var o={};o[e.sessionData.userData.properties.language]=n;var r=new t({name:o});r.$save(function(){a.location("/datamodel")})})}}]);
