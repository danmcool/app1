app1.controller("DatamodelCtrl",["$scope","SessionService","DesignDataModel","$location","$routeParams","$mdDialog",function(e,a,t,o,s,i){e.sessionData=a.getSessionData(),e.$watch(function(){return a.getSessionData()},function(a,t){a!=t&&(e.sessionData=a)}),e.sessionData.applicationName=e.sessionData.appData.datamodel_designer,a.setSessionData(e.sessionData),e.datamodels=[],e.skip=0,e.limit=10,e.stopScroll=!1,e.getNextDatamodels=function(){if(!e.stopScroll&&!e.tempStopScroll){var o=e.limit,s=e.skip;e.skip+=e.limit,e.tempStopScroll=!0,t.query({skip:s,limit:o},function(t){if(t.length<e.limit&&(e.stopScroll=!0),t&&t.length>0)for(var o=0;o<t.length;o++)t[o].translated_name=a.translate(t[o].name),t[o].translated_description=a.translate(t[o].description),e.datamodels.push(t[o]);e.tempStopScroll=!1})}},e.getNextDatamodels(),e.editDatamodel=function(e){a.location("/datamodel/"+e)},e.deleteDatamodel=function(e){a.location("/datamodel/"+e)},e.newDatamodel=function(){i.show(i.prompt().parent(angular.element(document.body)).clickOutsideToClose(!0).title(e.sessionData.appData.new_datamodel_name).initialValue("My Datamodel").ok(e.sessionData.appData.ok).cancel(e.sessionData.appData.cancel)).then(function(o){var s={};s[e.sessionData.userData.properties.language]=o;var i=new t({name:s});i.$save(function(){a.location("/datamodel/"+i._id)})})}}]);
