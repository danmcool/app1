app1.controller("DatamodelCtrl",["$scope","SessionService","DesignDataModel","$location","$routeParams","$mdDialog",function(e,t,o,r,n,a){e.sessionData=t.getSessionData(),e.$watch(function(){return t.getSessionData()},function(t,o){t!=o&&(e.sessionData=t)}),e.sessionData.applicationName=e.sessionData.appData.datamodel_designer,t.setSessionData(e.sessionData),e.datamodels=[],e.skip=0,e.limit=10,e.stopScroll=!1,e.getNextDatamodels=function(){if(!e.stopScroll&&!e.tempStopScroll){var r=e.limit,n=e.skip;e.skip+=e.limit,e.tempStopScroll=!0,o.query({skip:n,limit:r},function(o){if(o.length<e.limit&&(e.stopScroll=!0),o&&o.length>0)for(var r=0;r<o.length;r++)o[r].translated_name=t.translate(o[r].name),o[r].translated_description=t.translate(o[r].description),e.datamodels.push(o[r]);e.tempStopScroll=!1})}},e.getNextDatamodels(),e.editDatamodel=function(e){t.location("/datamodel/"+e)},e.deleteDatamodel=function(e){t.location("/datamodel/"+e)},e.newDatamodel=function(){a.show(a.prompt().parent(angular.element(document.body)).clickOutsideToClose(!0).title(e.sessionData.appData.new_datamodel_name).initialValue("My Datamodel").ok(e.sessionData.appData.ok).cancel(e.sessionData.appData.cancel)).then(function(r){var n={};n[e.sessionData.userData.properties.language]=r;var a=new o({name:n});a.$save(function(){t.location("/datamodel/"+a._id)})})}}]);
