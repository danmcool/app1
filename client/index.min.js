var app1=angular.module("app1",["ngRoute","ngResource","ngMaterial","ngMessages","infinite-scroll"]).config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue-grey").accentPalette("amber"),e.theme("user1").primaryPalette("purple").accentPalette("green"),e.theme("user2").primaryPalette("pink").accentPalette("orange"),e.theme("user3").primaryPalette("blue").accentPalette("light-blue"),e.alwaysWatchTheme(!0),e.generateThemesOnDemand(!1)}]).factory("Applications",["$resource",function(e){return e("/client/application/:id",null,{update:{method:"PUT"}})}]).factory("User",["$resource",function(e){return e("/client/user/:id",null,{update:{method:"PUT"}})}]).factory("Password",["$resource",function(e){return e("/authentication/password",null,{update:{method:"PUT"}})}]).factory("Company",["$resource",function(e){return e("/client/company/:id",null,{update:{method:"PUT"}})}]).factory("Login",["$resource",function(e){return e("/authentication/login",null,{update:{method:"PUT"}})}]).factory("UserStatus",["$resource",function(e){return e("/authentication/status",null,{update:{method:"PUT"}})}]).factory("Logout",["$resource",function(e){return e("/authentication/logout",null,{update:{method:"PUT"}})}]).factory("Register",["$resource",function(e){return e("/authentication/register",null,{update:{method:"PUT"}})}]).factory("Notify",["$resource",function(e){return e("/client/notify/:user_id",null,{update:{method:"PUT"}})}]).factory("Forms",["$resource",function(e){return e("/client/form/:id",null,{update:{method:"PUT"}})}]).factory("Value",["$resource",function(e){return e("/client/value/:id",null,{update:{method:"PUT"}})}]).factory("Share",["$resource",function(e){return e("/client/share",null,{update:{method:"PUT"}})}]).factory("Calendar",["$resource",function(e){return e("/client/calendar",null,{update:{method:"PUT"}})}]).factory("DataModels",["$resource",function(e){return e("/client/datamodel/:id",null,{update:{method:"PUT"}})}]).factory("Files",["$resource",function(e){return e("/file/:id",null,{update:{method:"PUT"}})}]).factory("Datas",["$resource",function(e){return e("/data/:datamodel_id/:entry_id",{datamodel_id:"@datamodel_id",entry_id:"@entry_id"},{update:{method:"PUT"}})}]).factory("SessionService",["AppTranslationService","$location","$resource","Login","Logout","UserStatus","Applications",function(e,n,o,t,i,r,a){var s={userData:{properties:{theme:"default",language:"en"}},applicationName:"App1",appData:{}},u=function(e){if(!e)return"xxxxx";var n=e[s.userData.properties.language];return n?n:e.en},d=function(e,n){if(!e)return"xxxxx";var o=e[n];return o?o:e.en},l=function(e){if(e.applications)for(var n=0;n<e.applications.length;n++)e.applications[n].translated_name=d(e.applications[n].name,e.userData.properties.language),e.applications[n].translated_description=d(e.applications[n].description,e.userData.properties.language);s=e},c=function(){return s},f=function(o,t){s={},s.token=o.token,s.userData=o.user,s.userData.title=(o.user.firstname?o.user.firstname:"")+" "+(o.user.lastname?o.user.lastname:"")+" @ "+(o.user.company.name?o.user.company.name:""),s.userData.name=(o.user.firstname?o.user.firstname:"")+" "+(o.user.lastname?o.user.lastname:""),s.appData=e.translate(s.userData.properties.language),a.query().$promise.then(function(e){s.applications=e;for(var o=s.applications,i=0;i<o.length;i++)o[i].translated_name=u(o[i].name),o[i].translated_description=u(o[i].description);t?(s.applicationName=s.appData.home,n.url("/applications")):"/"==n.path()&&n.url("/applications")})["catch"](function(e){})},p=function(){r.get().$promise.then(function(e){f(e,!1)})["catch"](function(o){s.appData=e.translate(s.userData.properties.language),n.url("/")})},m=function(o,i){var r=new t({user:o,password:i});r.$save(function(e){f(e,!0)})["catch"](function(o){s.appData=e.translate(s.userData.properties.language),n.url("/")})},C=function(){i.get(),s={userData:{properties:{theme:"default",language:"en"}},applicationName:"App1"},s.appData=e.translate(s.userData.properties.language),n.url("/")};return{setSessionData:l,getSessionData:c,translate:u,init:p,login:m,logout:C}}]).factory("MapService",function(){var e={},n=function(n){e[n]=new google.maps.Map(document.getElementById(n),{zoom:2,scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1,draggable:!1,mapTypeId:google.maps.MapTypeId.ROADMAP})},o=function(n,o){var t=new google.maps.Geocoder;t.geocode({address:o},function(o,t){if("OK"===t){e[n].setCenter(o[0].geometry.location),e[n].setZoom(14);new google.maps.Marker({map:e[n],position:o[0].geometry.location})}})};return{geocodeAddress:o,initMap:n}}).controller("AppCtrl",["$scope","$timeout","$mdSidenav","SessionService",function(e,n,o,t){function i(o,t,i){var r;return function(){var i=e,a=Array.prototype.slice.call(arguments);n.cancel(r),r=n(function(){r=void 0,o.apply(i,a)},t||10)}}function r(e){return i(function(){o(e).toggle()},200)}e.sessionData=t.getSessionData(),e.$watch(function(){return t.getSessionData()},function(n,o){n!=o&&(e.sessionData=n)}),t.init(),e.closeLeft=function(){o("left").close()},e.closeRight=function(){o("right").close()},e.logout=function(){o("right").close(),t.logout()},e.notifyForm=function(){},e.toggleLeft=r("left"),e.toggleRight=r("right")}]).config(["$routeProvider",function(e){e.when("/form/:id/:entry_id",{templateUrl:"core/forms.html",controller:"FormDetailsCtrl"}).when("/workflows/:application_id",{templateUrl:"core/workflows.html",controller:"WorkflowsCtrl"}).when("/welcome",{templateUrl:"core/welcome.html",controller:"WelcomeCtrl"}).when("/register",{templateUrl:"core/register.html",controller:"RegisterCtrl"}).when("/login",{templateUrl:"core/login.html",controller:"LoginCtrl"}).when("/user",{templateUrl:"core/user.html",controller:"UserCtrl"}).when("/company",{templateUrl:"core/company.html",controller:"CompanyCtrl"}).when("/applications",{templateUrl:"core/applications.html",controller:"ApplicationsCtrl"}).when("/designer",{templateUrl:"designer/designer.html",controller:"DesignerCtrl"}).when("/application_edit/:id",{templateUrl:"designer/application.html",controller:"ApplicationEditCtrl"}).when("/application_share/:id",{templateUrl:"designer/share.html",controller:"ApplicationShareCtrl"}).when("/workflow_edit/:id",{templateUrl:"designer/workflow.html",controller:"WorkflowEditCtrl"}).when("/form_edit/:id",{templateUrl:"designer/form.html",controller:"FormEditCtrl"}).otherwise({redirectTo:"/",templateUrl:"core/welcome.html",controller:"WelcomeCtrl"})}]);
